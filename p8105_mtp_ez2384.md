Data Science I, Midterm Project
================

``` r
# Load Necessary Packages
  library(ggplot2)
  library(tidyverse)
  library(dplyr)
  library(tidyr)

# Preliminary Loading of All Datasets
  NYC_Rental_Price = read.csv("./NYC Rental.csv")
  NYC_Zipcode      = read.csv("./NYC Zipcode.csv")
  US_Housing_Price = read.csv("./US Housing 2023.csv")
```

### Problem 1: Data Import and Cleaning

##### \[Discussion\] Description and Processing of Raw Datasets

- `NYC_Rental_Price Dataset`
  - Description: contain detailed NYC Rental Prices between Jan.2015 to
    Aug.2024 listed by zip codes  
  - Dimension: 149 x 125  
  - Unique Zipcodes: 149
  - Issues:
    - ambiguous column names
      - Column name `RegionName` actually consists entirely of zipcode
        information, which is very misleading.  
      - Column names of form `X2015.1.31` should be renamed for better
        readability.  
    - redundant columns
      - Column `RegionID` is useless as we can treat the zipcode
        variable as the unique identifier.
      - The entire dataset is within NYC so columns `StateName`,
        `State`, `City`, `Metro` can be removed.
      - Column `SizeRank` is never used for future analysis.
      - Column `RegionType` has only 1 level of value and is useless.
    - too much missing data  
  - Data Cleaning Strategy:
    - Rename and Keep only the following columns: `county`, `zipcode`,
      and all date columns of form `%yyyy%mm%dd`.
    - Remove records containing empty values.
- `NYC_Zipcode Dataset`
  - Description: contain detailed zipcode-location associations within
    NYC  
  - Dimension: 322 x 7  
  - Unique Zipcodes: 320
  - Issues:
    - redundant columns
      - Only column `County`, `ZipCode`, `Neighborhood` is useful.
  - Data Cleaning Strategy:
    - Rename and Keep only columns `county` and `zipcode`.
    - Also per instruction required, add `borough` variable.
- `US_Housing_Price Dataset`
  - Description: contains detailed housing prices information within
    entire U.S. associated with specific area  
  - Dimension: 26338 x 21  
  - Issues:
    - ambiguous columns
      - Column name `RegionName` actually consists entirely of zipcode
        information, which is very misleading.
      - Column names of form `X2015.1.31` should be renamed for better
        readability.  
    - redundant columns
      - Only zipcodes, State, and date columns are used in future
        analysis.  
    - missing data
  - Data Cleaning Strategy:
    - Rename and Keep only variables `zipcode`, `state`, and all date
      columns of form `%yyyy%mm%dd`.
    - Remove records containing empty values.

##### \[Code Chunk\] Raw Data Cleaning

``` r
  NYC_Rental_Price = NYC_Rental_Price %>% janitor::clean_names() %>% select(-region_id, -size_rank, -region_type, -state_name, -state, -city, -metro) %>%
                     rename("zipcode"="region_name", "county"="county_name") %>% mutate(county=gsub(" County","",county)) %>% mutate(across(where(is.numeric), \(x) round(x, 2))) %>%
                     drop_na() %>% arrange(zipcode)
                     colnames(NYC_Rental_Price)[3:ncol(NYC_Rental_Price)] <- colnames(NYC_Rental_Price)[3:ncol(NYC_Rental_Price)] %>% sub("x", "", .) %>% gsub("_", "/", .) %>%
                                                                             sub("(\\d{4})/(\\d{1})/(\\d{2})", "\\1/0\\2/\\3", .)
                     
  NYC_Zipcode = NYC_Zipcode %>% janitor::clean_names() %>% select(county, zip_code, neighborhood) %>% rename("zipcode"="zip_code") %>% drop_na() %>% 
                mutate(borough=recode(county, "Kings"="Brooklyn", "New York"="Manhattan", "Richmond"="Staten Island")) %>% relocate(zipcode, county, borough)
  
  US_Housing_Price = US_Housing_Price %>% janitor::clean_names() %>% select(region_name, state, starts_with("x")) %>% rename("zipcode"="region_name") %>% drop_na() %>% arrange(zipcode)
                     colnames(US_Housing_Price)[3:ncol(US_Housing_Price)] <- colnames(US_Housing_Price)[3:ncol(US_Housing_Price)] %>% sub("x", "", .) %>% gsub("_", "/", .) %>%
                                                                             sub("(\\d{4})/(\\d{1})/(\\d{2})", "\\1/0\\2/\\3", .)
```

##### \[Code Chunk\] Merge NYC_Rental and NYC_Zipcode Datasets

``` r
  Merged = left_join(x=NYC_Zipcode, y=NYC_Rental_Price, by="zipcode") %>% rename("county"="county.x") %>% select(-county.y) %>% relocate(zipcode, county, borough, neighborhood) %>% drop_na()
```

##### \[Discussion\] Merged Datasets, Issues, Fixing

- The merged dataset has several issues, firstly there are many missing
  values under the county column from the `NYC_Rental_Price` dataset, so
  we drop `county.y` as all information is available in `county.y`. The
  merged dataset has no missing values for the character variables
  `zipcode`, `borough`, `county` but has plenty of missing values for
  the numeric ones. Remove records containing empty values.

##### Discussion on TIDYed Dataset

- `NYC_Rental_Price` Dataset
  - Dimension: 48 x 118
  - Unique Zipcodes: 48
- `NYC_Zipcode` Dataset
  - Dimension: 180 x 4
  - Unique Zipcodes: 178
- `US_Housing_Price` Dataset
  - Dimension 25811 x 14
- The merged `Merged` Dataset
  - Dimension 48 x 120
  - Unique Zipcodes: 47
  - Unique Neighborhoods: 19

The distinction between datasets `NYC_Rental_Price` and `NYC_Zipcode` in
terms of the number of Zipcodes is probably due to  
1. There are non-unique zipcode present in the `NYC_Zipcode` dataset  
1. Many records of the `NYC_Rental_Price` were removed due to incomplete
data  
1. The `NYC_Zipcode` dataset is not covering every corner within NYC so
it is not as thorough as the zipcodes in the `NYC_Zipcode` dataset

After identifying non-unique zipcodes, rectify the cleaned datasets to
ensure `zipcode` is unique-identifer among all datasets.

``` r
  NYC_Rental_Price %>% group_by(zipcode) %>% filter(n() > 1) %>% distinct(zipcode)  # zipcodes all unique
```

    ## # A tibble: 0 × 1
    ## # Groups:   zipcode [0]
    ## # ℹ 1 variable: zipcode <dbl>

``` r
  NYC_Zipcode %>% group_by(zipcode) %>% filter(n() > 1) %>% distinct(zipcode)       # zipcode 10463 and 11201
```

    ## # A tibble: 2 × 1
    ## # Groups:   zipcode [2]
    ##   zipcode
    ##     <int>
    ## 1   10463
    ## 2   11201

``` r
  US_Housing_Price %>% group_by(zipcode) %>% filter(n() > 1) %>% distinct(zipcode)  # zipcodes all unique
```

    ## # A tibble: 0 × 1
    ## # Groups:   zipcode [0]
    ## # ℹ 1 variable: zipcode <int>

``` r
  Merged %>% group_by(zipcode) %>% filter(n() > 1) %>% distinct(zipcode)            # zipcode 11201
```

    ## # A tibble: 1 × 1
    ## # Groups:   zipcode [1]
    ##   zipcode
    ##     <dbl>
    ## 1   11201

``` r
  NYC_Zipcode %>% filter(zipcode==11201 | zipcode==10463)       # correct data should be: 11201--Kings--Brooklyn & 10463--Bronx--Bronx
```

    ##   zipcode   county   borough              neighborhood
    ## 1   10463    Bronx     Bronx Kingsbridge and Riverdale
    ## 2   11201    Kings  Brooklyn        Northwest Brooklyn
    ## 3   10463 New York Manhattan Kingsbridge and Riverdale
    ## 4   11201 New York Manhattan        Northwest Brooklyn

``` r
  Merged %>% filter(zipcode==11201)                             # correct data should be: 11201--Kings--Brooklyn
```

    ##   zipcode   county   borough       neighborhood 2015/01/31 2015/02/28
    ## 1   11201    Kings  Brooklyn Northwest Brooklyn    3092.36    3103.69
    ## 2   11201 New York Manhattan Northwest Brooklyn    3092.36    3103.69
    ##   2015/03/31 2015/04/30 2015/05/31 2015/06/30 2015/07/31 2015/08/31 2015/09/30
    ## 1    3132.11    3131.66    3139.16    3146.26    3163.32    3184.47    3192.38
    ## 2    3132.11    3131.66    3139.16    3146.26    3163.32    3184.47    3192.38
    ##   2015/10/31 2015/11/30 2015/12/31 2016/01/31 2016/02/29 2016/03/31 2016/04/30
    ## 1    3214.95    3184.03    3144.61    3122.61    3137.85    3197.36    3206.52
    ## 2    3214.95    3184.03    3144.61    3122.61    3137.85    3197.36    3206.52
    ##   2016/05/31 2016/06/30 2016/07/31 2016/08/31 2016/09/30 2016/10/31 2016/11/30
    ## 1    3231.99    3225.32     3241.6    3237.25    3228.15    3232.64    3216.68
    ## 2    3231.99    3225.32     3241.6    3237.25    3228.15    3232.64    3216.68
    ##   2016/12/31 2017/01/31 2017/02/28 2017/03/31 2017/04/30 2017/05/31 2017/06/30
    ## 1    3180.16    3146.61    3146.61    3182.47    3200.83    3224.22    3219.39
    ## 2    3180.16    3146.61    3146.61    3182.47    3200.83    3224.22    3219.39
    ##   2017/07/31 2017/08/31 2017/09/30 2017/10/31 2017/11/30 2017/12/31 2018/01/31
    ## 1    3259.33    3271.51    3272.87    3233.65    3188.42     3143.7    3134.51
    ## 2    3259.33    3271.51    3272.87    3233.65    3188.42     3143.7    3134.51
    ##   2018/02/28 2018/03/31 2018/04/30 2018/05/31 2018/06/30 2018/07/31 2018/08/31
    ## 1    3156.83    3213.94    3248.11    3275.43    3307.33     3334.5    3358.62
    ## 2    3156.83    3213.94    3248.11    3275.43    3307.33     3334.5    3358.62
    ##   2018/09/30 2018/10/31 2018/11/30 2018/12/31 2019/01/31 2019/02/28 2019/03/31
    ## 1    3351.82    3349.23    3334.65     3329.3    3326.51    3346.71    3358.53
    ## 2    3351.82    3349.23    3334.65     3329.3    3326.51    3346.71    3358.53
    ##   2019/04/30 2019/05/31 2019/06/30 2019/07/31 2019/08/31 2019/09/30 2019/10/31
    ## 1    3380.93    3399.37    3425.17    3472.64    3490.19    3513.07    3484.61
    ## 2    3380.93    3399.37    3425.17    3472.64    3490.19    3513.07    3484.61
    ##   2019/11/30 2019/12/31 2020/01/31 2020/02/29 2020/03/31 2020/04/30 2020/05/31
    ## 1    3463.26    3443.44    3454.47    3489.67    3514.78    3506.26    3452.71
    ## 2    3463.26    3443.44    3454.47    3489.67    3514.78    3506.26    3452.71
    ##   2020/06/30 2020/07/31 2020/08/31 2020/09/30 2020/10/31 2020/11/30 2020/12/31
    ## 1    3405.94    3339.88    3274.96    3192.12    3129.65    3090.93    3094.72
    ## 2    3405.94    3339.88    3274.96    3192.12    3129.65    3090.93    3094.72
    ##   2021/01/31 2021/02/28 2021/03/31 2021/04/30 2021/05/31 2021/06/30 2021/07/31
    ## 1    3129.93    3183.21    3233.77    3293.23    3365.96    3453.17    3532.51
    ## 2    3129.93    3183.21    3233.77    3293.23    3365.96    3453.17    3532.51
    ##   2021/08/31 2021/09/30 2021/10/31 2021/11/30 2021/12/31 2022/01/31 2022/02/28
    ## 1    3610.16    3637.77    3677.91    3705.91    3763.83     3797.3    3833.82
    ## 2    3610.16    3637.77    3677.91    3705.91    3763.83     3797.3    3833.82
    ##   2022/03/31 2022/04/30 2022/05/31 2022/06/30 2022/07/31 2022/08/31 2022/09/30
    ## 1    3859.12    3905.47    3974.31    4039.72    4089.55    4128.14    4153.34
    ## 2    3859.12    3905.47    3974.31    4039.72    4089.55    4128.14    4153.34
    ##   2022/10/31 2022/11/30 2022/12/31 2023/01/31 2023/02/28 2023/03/31 2023/04/30
    ## 1    4136.65    4074.86    4058.63    4068.32    4139.38    4171.14    4195.34
    ## 2    4136.65    4074.86    4058.63    4068.32    4139.38    4171.14    4195.34
    ##   2023/05/31 2023/06/30 2023/07/31 2023/08/31 2023/09/30 2023/10/31 2023/11/30
    ## 1    4205.86    4214.25    4267.71    4299.65     4321.9    4308.35    4264.27
    ## 2    4205.86    4214.25    4267.71    4299.65     4321.9    4308.35    4264.27
    ##   2023/12/31 2024/01/31 2024/02/29 2024/03/31 2024/04/30 2024/05/31 2024/06/30
    ## 1    4257.55    4235.08    4244.61    4272.13    4314.14    4352.86    4357.17
    ## 2    4257.55    4235.08    4244.61    4272.13    4314.14    4352.86    4357.17
    ##   2024/07/31 2024/08/31
    ## 1    4387.18    4406.93
    ## 2    4387.18    4406.93

``` r
  NYC_Zipcode = NYC_Zipcode %>% filter(!(zipcode==11201 & county=="New York")) %>% filter(!(zipcode==10463 & county=="New York"))
  Merged = Merged %>% filter(!(zipcode==11201 & county=="New York"))
```

##### Report Objectives
